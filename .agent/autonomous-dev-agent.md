# ğŸ¤– Autonomous Development Agent

Stop the slow back-and-forth! This agent works autonomously while you sleep.

## ğŸ¯ The Problem

**Current workflow (SLOW ğŸ˜«):**
```
You: "Add hashtag filtering"
AI: "Let me analyze the code..."
You: *waits 5 minutes*
AI: "Here's a plan, approve?"
You: "Yes"
AI: "Making changes..."
You: *waits 10 minutes*
AI: "Done! Test it?"
You: "Yes"
AI: "Testing..."
You: *waits 5 minutes*
Total: 20+ minutes of babysitting
```

**New workflow (FAST ğŸš€):**
```
You: "Add hashtag filtering" â†’ Go to bed
Agent: *Analyzes, plans, codes, tests, commits, creates PR*
You: Wake up â†’ Review PR â†’ Merge
Total: 30 seconds of your time
```

---

## ğŸš€ Setup: Autonomous Agent

### Option 1: GitHub Actions (Fully Automated)

Create `.github/workflows/autonomous-dev.yml`:

```yaml
name: Autonomous Development Agent

on:
  issues:
    types: [opened, labeled]
  issue_comment:
    types: [created]

jobs:
  autonomous-dev:
    # Trigger when issue has "auto-dev" label or comment starts with "/dev"
    if: |
      (github.event.issue && contains(github.event.issue.labels.*.name, 'auto-dev')) ||
      (github.event.comment && startsWith(github.event.comment.body, '/dev'))
    
    runs-on: ubuntu-latest
    timeout-minutes: 60
    
    steps:
      - name: Parse task from issue
        id: parse
        run: |
          TASK="${{ github.event.issue.body || github.event.comment.body }}"
          TASK=$(echo "$TASK" | sed 's/^\/dev //')
          echo "task=$TASK" >> $GITHUB_OUTPUT
      
      - name: Checkout main
        uses: actions/checkout@v4
      
      - name: Create feature branch
        run: |
          BRANCH="auto-dev/$(date +%s)"
          git checkout -b $BRANCH
          echo "branch=$BRANCH" >> $GITHUB_ENV
      
      - name: Setup Node
        uses: actions/setup-node@v4
        with:
          node-version: '18'
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Run autonomous agent
        env:
          ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
          TASK: ${{ steps.parse.outputs.task }}
        run: |
          # Call Claude API to autonomously complete the task
          node .agent/scripts/autonomous-agent.js "$TASK"
      
      - name: Commit changes
        run: |
          git config --local user.email "auto-dev[bot]@users.noreply.github.com"
          git config --local user.name "Autonomous Dev Agent"
          git add .
          git commit -m "feat: ${{ steps.parse.outputs.task }}" || echo "No changes"
          git push -u origin ${{ env.branch }}
      
      - name: Create PR
        uses: actions/github-script@v7
        with:
          script: |
            const { data: pr } = await github.rest.pulls.create({
              owner: context.repo.owner,
              repo: context.repo.repo,
              title: `ğŸ¤– Auto-dev: ${{ steps.parse.outputs.task }}`,
              head: process.env.branch,
              base: 'main',
              body: `## ğŸ¤– Autonomous Development Agent
              
              **Task**: ${{ steps.parse.outputs.task }}
              
              This PR was created autonomously. Review the changes and merge if everything looks good!
              
              **Generated by**: Autonomous Dev Agent
              **Triggered by**: #${{ github.event.issue.number }}
              `
            });
            
            // Comment on issue
            await github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: `ğŸ¤– **Autonomous agent completed!**\n\nPR created: #${pr.number}\n\nReview and merge when ready!`
            });
```

### Option 2: OpenClaw Discord Bot (Interactive)

**Setup OpenClaw to work autonomously:**

```javascript
// openclaw/autonomous-dev.js
const Anthropic = require('@anthropic-ai/sdk');
const { exec } = require('child_process');
const util = require('util');
const execPromise = util.promisify(exec);

class AutonomousDevAgent {
  constructor(apiKey, repoPath) {
    this.client = new Anthropic({ apiKey });
    this.repoPath = repoPath;
  }
  
  async executeTask(task, progressCallback) {
    progressCallback('ğŸ¤– Starting autonomous development...');
    
    // Step 1: Analyze codebase
    progressCallback('ğŸ“Š Analyzing codebase...');
    const analysis = await this.analyzeCodebase();
    
    // Step 2: Create plan
    progressCallback('ğŸ“ Creating implementation plan...');
    const plan = await this.createPlan(task, analysis);
    
    // Step 3: Execute plan autonomously
    progressCallback('âš¡ Executing plan (this may take a while)...');
    const result = await this.executePlan(plan);
    
    // Step 4: Test
    progressCallback('ğŸ§ª Running tests...');
    await this.runTests();
    
    // Step 5: Create PR
    progressCallback('ğŸš€ Creating PR...');
    const pr = await this.createPR(task);
    
    progressCallback(`âœ… Done! PR: ${pr.url}`);
    return pr;
  }
  
  async analyzeCodebase() {
    const { stdout } = await execPromise('find src -name "*.tsx" -o -name "*.ts"', {
      cwd: this.repoPath
    });
    return stdout.split('\n').filter(Boolean);
  }
  
  async createPlan(task, files) {
    const response = await this.client.messages.create({
      model: 'claude-3-5-sonnet-20241022',
      max_tokens: 4000,
      messages: [{
        role: 'user',
        content: `You are an autonomous development agent. Create a detailed implementation plan for: ${task}
        
        Available files: ${files.join(', ')}
        
        Return a JSON plan with steps, files to modify, and exact changes.`
      }]
    });
    
    return JSON.parse(response.content[0].text);
  }
  
  async executePlan(plan) {
    for (const step of plan.steps) {
      // Use Claude to generate the actual code
      const response = await this.client.messages.create({
        model: 'claude-3-5-sonnet-20241022',
        max_tokens: 8000,
        messages: [{
          role: 'user',
          content: `Execute this step: ${JSON.stringify(step)}
          
          Generate the complete file content or code changes needed.`
        }]
      });
      
      // Apply the changes
      const code = response.content[0].text;
      await this.applyChanges(step.file, code);
    }
  }
  
  async applyChanges(file, code) {
    const fs = require('fs').promises;
    await fs.writeFile(`${this.repoPath}/${file}`, code);
  }
  
  async runTests() {
    await execPromise('npm run lint', { cwd: this.repoPath });
    await execPromise('npm run type-check', { cwd: this.repoPath });
  }
  
  async createPR(task) {
    const branch = `auto-dev/${Date.now()}`;
    await execPromise(`git checkout -b ${branch}`, { cwd: this.repoPath });
    await execPromise('git add .', { cwd: this.repoPath });
    await execPromise(`git commit -m "feat: ${task}"`, { cwd: this.repoPath });
    await execPromise(`git push -u origin ${branch}`, { cwd: this.repoPath });
    
    // Create PR via GitHub API
    return { url: `https://github.com/smaranje/prompt-clicker/pull/new/${branch}` };
  }
}

module.exports = AutonomousDevAgent;
```

**Discord bot integration:**

```javascript
// openclaw/commands/dev.js
const AutonomousDevAgent = require('../autonomous-dev');

module.exports = {
  name: 'dev',
  description: 'Autonomous development',
  async execute(message, args) {
    const task = args.join(' ');
    
    if (!task) {
      return message.reply('Usage: !dev <task description>');
    }
    
    const statusMsg = await message.reply('ğŸ¤– Starting autonomous development...');
    
    const agent = new AutonomousDevAgent(
      process.env.ANTHROPIC_API_KEY,
      '/path/to/prompt-clicker'
    );
    
    try {
      await agent.executeTask(task, (status) => {
        statusMsg.edit(status);
      });
      
      message.reply('âœ… Development complete! Check the PR.');
    } catch (error) {
      message.reply(`âŒ Error: ${error.message}`);
    }
  }
};
```

---

## ğŸ® Usage Examples

### Via GitHub Issues:

1. Create issue: "Add dark mode toggle to settings"
2. Add label: `auto-dev`
3. Go to bed ğŸ˜´
4. Wake up to a PR! â˜•

### Via Discord (OpenClaw):

```
You: !dev Add hashtag filtering to Discover page
Bot: ğŸ¤– Starting autonomous development...
Bot: ğŸ“Š Analyzing codebase...
Bot: ğŸ“ Creating implementation plan...
Bot: âš¡ Executing plan (this may take a while)...
Bot: ğŸ§ª Running tests...
Bot: ğŸš€ Creating PR...
Bot: âœ… Done! PR: https://github.com/smaranje/prompt-clicker/pull/123

You: !dev Add 20 more templates
Bot: ğŸ¤– On it! This will take ~10 minutes...
*You go make coffee*
Bot: âœ… Done! PR: https://github.com/smaranje/prompt-clicker/pull/124
```

### Via Comment:

```
/dev Implement user authentication with Supabase
```

Agent creates PR autonomously!

---

## âš¡ Advanced: Parallel Multi-Agent Development

Run multiple agents in parallel:

```
You: !dev-swarm
  - Add hashtag filtering
  - Add related prompts
  - Add 45 new templates
  - Implement dark mode
  - Add user profiles

Bot: ğŸš€ Deploying 5 autonomous agents...
Agent 1: Working on hashtag filtering...
Agent 2: Working on related prompts...
Agent 3: Working on templates...
Agent 4: Working on dark mode...
Agent 5: Working on user profiles...

*15 minutes later*

Bot: âœ… All agents complete!
- PR #123: Hashtag filtering
- PR #124: Related prompts
- PR #125: 45 new templates
- PR #126: Dark mode
- PR #127: User profiles

Merge them all or review individually!
```

---

## ğŸ¯ Benefits

**Before (Manual):**
- You: Explain task â†’ 5 min
- AI: Analyze â†’ 5 min
- AI: Code â†’ 15 min
- You: Review â†’ 5 min
- You: Request changes â†’ 5 min
- AI: Fix â†’ 10 min
- **Total: 45 minutes** of active involvement

**After (Autonomous):**
- You: "!dev Add feature X" â†’ 10 seconds
- Agent: Does everything â†’ 15 minutes (you're not watching)
- You: Review PR â†’ 2 minutes
- You: Merge â†’ 10 seconds
- **Total: 2 minutes 20 seconds** of your time

**Time saved: 42 minutes per task!**

---

## ğŸ› ï¸ Quick Start

1. **Add Anthropic API key** to GitHub secrets:
   ```
   ANTHROPIC_API_KEY=your_key_here
   ```

2. **Create the workflow file** (already done above)

3. **Test it:**
   ```
   Create issue: "Add a new template for email marketing"
   Add label: auto-dev
   Wait 10-15 minutes
   Review PR
   ```

4. **Go wild:**
   ```
   !dev Add 100 new templates
   !dev Implement full authentication
   !dev Add analytics dashboard
   !dev Refactor entire codebase
   ```

---

## ğŸ’ª You're Now a 10x Developer

You can literally:
- Queue up 10 tasks before bed
- Wake up to 10 PRs
- Review and merge in 30 minutes
- Ship more in one night than most devs ship in a week

**Welcome to autonomous development! ğŸš€**
